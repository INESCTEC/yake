
<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>üöÄ YAKE 2.0 - Dashboard</title>
    <!-- Updated: 29/09/2025 - Added Version Switching -->
</head>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #2c3e50;
            line-height: 1.6;
        }
        
        .dashboard-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            background: linear-gradient(135deg, #2c3e50 0%, #3498db 100%);
            color: white;
            padding: 40px;
            border-radius: 15px;
            text-align: center;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        .header h1 {
            font-size: 3em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .improvement-banner {
            background: linear-gradient(135deg, #27ae60 0%, #2ecc71 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            font-size: 1.8em;
            font-weight: bold;
            margin-bottom: 30px;
            box-shadow: 0 5px 20px rgba(39, 174, 96, 0.3);
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: white;
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
        }
        
        .stat-number {
            font-size: 2.5em;
            font-weight: bold;
            color: #e74c3c;
            margin-bottom: 10px;
            display: block;
        }
        
        .stat-label {
            color: #7f8c8d;
            font-size: 1.1em;
        }
        
        .controls {
            background: white;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 30px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }
        
        .controls h3 {
            margin-bottom: 15px;
            color: #2c3e50;
        }
        
        .control-group {
            display: flex;
            gap: 15px;
            align-items: center;
            flex-wrap: wrap;
        }
        
        .control-group select, .control-group button {
            padding: 8px 15px;
            border: 2px solid #ecf0f1;
            border-radius: 5px;
            background: white;
            color: #2c3e50;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        #versionSwitch {
            background: #f39c12 !important;
            color: white !important;
            border: 2px solid #e67e22 !important;
            font-weight: bold;
            min-width: 180px;
        }
        
        .control-group button {
            background: #3498db;
            color: white;
            border-color: #3498db;
        }
        
        .control-group button:hover {
            background: #2980b9;
        }
        
        .charts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(600px, 1fr));
            gap: 30px;
            margin-bottom: 30px;
        }
        
        .chart-container {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        
        .chart-title {
            font-size: 1.5em;
            font-weight: bold;
            margin-bottom: 20px;
            color: #2c3e50;
            text-align: center;
        }
        
        .chart-wrapper {
            position: relative;
            height: 400px;
        }
        
        .full-width {
            grid-column: 1 / -1;
        }
        
        .heatmap-container {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 5px;
            max-width: 800px;
            margin: 0 auto;
        }
        
        .heatmap-cell {
            aspect-ratio: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 12px;
            border-radius: 4px;
            cursor: pointer;
            transition: transform 0.2s ease;
        }
        
        .heatmap-cell:hover {
            transform: scale(1.1);
            z-index: 10;
        }
        
        .heatmap-labels {
            display: grid;
            grid-template-columns: 200px repeat(5, 1fr);
            gap: 5px;
            max-width: 800px;
            margin: 0 auto 20px;
            font-weight: bold;
        }
        
        .heatmap-labels .dataset-label {
            text-align: right;
            padding-right: 10px;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            font-size: 12px;
        }
        
        .heatmap-labels .config-label {
            text-align: center;
            font-size: 12px;
        }
        
        .legend {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
            margin-top: 20px;
        }
        
        .legend-gradient {
            width: 200px;
            height: 20px;
            background: linear-gradient(to right, #27ae60, #f39c12, #e74c3c);
            border-radius: 10px;
        }
    </style>
</head>
<body>
    <div class="dashboard-container">
        <!-- Header -->
        <div class="header">
            <h1>üöÄ YAKE 2.0 - Dashboard</h1>
            <p>An√°lise Comparativa de Performance - Vers√£o Otimizada</p>
            <p><em>Corrigido em 29 de September de 2025 √†s 18:14</em></p>
        </div>
        
        <!-- Improvement Banner -->
        <div class="improvement-banner">
            üéØ MELHORIA GERAL: 5.6x MAIS R√ÅPIDO
        </div>
        
        <!-- Statistics Cards -->
        <div class="stats-grid">
            <div class="stat-card">
                <span class="stat-number">145.3ms</span>
                <div class="stat-label">Vers√£o Anterior</div>
            </div>
            <div class="stat-card">
                <span class="stat-number">26.0ms</span>
                <div class="stat-label">Vers√£o Otimizada</div>
            </div>
            <div class="stat-card">
                <span class="stat-number">5.6x</span>
                <div class="stat-label">Melhoria Global</div>
            </div>
            <div class="stat-card">
                <span class="stat-number">458%</span>
                <div class="stat-label">Redu√ß√£o de Tempo</div>
            </div>
        </div>
        
        <!-- Controls -->
        <div class="controls">
            <h3>üéõÔ∏è Controles Interativos</h3>
            
            <!-- Version Control - Highlighted -->
            <div class="control-group" style="margin-bottom: 15px; padding: 10px; border: 2px dashed #f39c12; border-radius: 8px; background: rgba(243, 156, 18, 0.1);">
                <strong>üîÑ Alternar Vers√£o:</strong>
                <select id="versionSwitch" onchange="switchVersion()" style="font-size: 16px; font-weight: bold;">
                    <option value="optimized">üéØ Vers√£o Otimizada (26ms)</option>
                    <option value="original">‚è≥ Vers√£o Original (145ms)</option>
                </select>
            </div>
            
            <!-- Other Controls -->
            <div class="control-group">
                <label for="configFilter">Filtrar Configura√ß√£o:</label>
                <select id="configFilter" onchange="filterByConfig()">
                    <option value="all">Todas as Configura√ß√µes</option>
                    <option value="standard">Standard</option>
                    <option value="high_precision">High Precision</option>
                    <option value="high_recall">High Recall</option>
                    <option value="fast_extraction">Fast Extraction</option>
                    <option value="comprehensive">Comprehensive</option>
                </select>
                
                <button onclick="resetCharts()">üîÑ Reset</button>
                <button onclick="exportData()">üíæ Exportar</button>
            </div>
        </div>
        
        <!-- Main Charts Section -->
        <div class="charts-grid">
            <!-- Comparison Chart -->
            <div class="chart-container">
                <div class="chart-title">Compara√ß√£o de Vers√µes por Configura√ß√£o</div>
                <div class="chart-wrapper">
                    <canvas id="comparisonChart"></canvas>
                </div>
            </div>
            
            <!-- Throughput Chart -->
            <div class="chart-container">
                <div class="chart-title">Throughput: Palavras por Segundo</div>
                <div class="chart-wrapper">
                    <canvas id="throughputChart"></canvas>
                </div>
            </div>
        </div>
        
        <!-- Heatmap Section -->
        <div class="chart-container full-width">
            <div class="chart-title">üî• Mapa de Calor - Performance por Dataset</div>
            <div class="heatmap-labels">
                <div></div>
                <div class="config-label">Comprehensive</div>
                <div class="config-label">Fast Extraction</div>
                <div class="config-label">High Precision</div>
                <div class="config-label">High Recall</div>
                <div class="config-label">Standard</div>
            </div>
            <div id="heatmapContainer">
                <!-- Heatmap ser√° gerado dinamicamente -->
            </div>
            <div class="legend">
                <span id="legendMin">R√°pido</span>
                <div class="legend-gradient"></div>
                <span id="legendMax">Lento</span>
            </div>
        </div>
    </div>

    <script>
        // Dados globais - Vers√£o Otimizada
        const heatmapDataOptimized = {"data": [{"dataset": "ciencia_dados_medio", "config": "comprehensive", "config_display": "Comprehensive", "value": 12.854939996032044, "x": 0, "y": 0}, {"dataset": "ciencia_dados_medio", "config": "fast_extraction", "config_display": "Fast Extraction", "value": 6.95671333038869, "x": 1, "y": 0}, {"dataset": "ciencia_dados_medio", "config": "high_precision", "config_display": "High Precision", "value": 8.310225002787774, "x": 2, "y": 0}, {"dataset": "ciencia_dados_medio", "config": "high_recall", "config_display": "High Recall", "value": 10.258299997076392, "x": 3, "y": 0}, {"dataset": "ciencia_dados_medio", "config": "standard", "config_display": "Standard", "value": 7.433469998068176, "x": 4, "y": 0}, {"dataset": "economia_sustentavel", "config": "comprehensive", "config_display": "Comprehensive", "value": 11.481399997137487, "x": 0, "y": 1}, {"dataset": "economia_sustentavel", "config": "fast_extraction", "config_display": "Fast Extraction", "value": 7.9740800041084485, "x": 1, "y": 1}, {"dataset": "economia_sustentavel", "config": "high_precision", "config_display": "High Precision", "value": 9.35378749636584, "x": 2, "y": 1}, {"dataset": "economia_sustentavel", "config": "high_recall", "config_display": "High Recall", "value": 9.536950001347577, "x": 3, "y": 1}, {"dataset": "economia_sustentavel", "config": "standard", "config_display": "Standard", "value": 9.71914999827277, "x": 4, "y": 1}, {"dataset": "medicina_especializada", "config": "comprehensive", "config_display": "Comprehensive", "value": 12.074240006040782, "x": 0, "y": 2}, {"dataset": "medicina_especializada", "config": "fast_extraction", "config_display": "Fast Extraction", "value": 8.36680666737569, "x": 1, "y": 2}, {"dataset": "medicina_especializada", "config": "high_precision", "config_display": "High Precision", "value": 11.587575001613004, "x": 2, "y": 2}, {"dataset": "medicina_especializada", "config": "high_recall", "config_display": "High Recall", "value": 14.052787497348618, "x": 3, "y": 2}, {"dataset": "medicina_especializada", "config": "standard", "config_display": "Standard", "value": 9.932540002046153, "x": 4, "y": 2}, {"dataset": "relatorio_licenciatura_pdf", "config": "comprehensive", "config_display": "Comprehensive", "value": 116.4404200098943, "x": 0, "y": 3}, {"dataset": "relatorio_licenciatura_pdf", "config": "fast_extraction", "config_display": "Fast Extraction", "value": 89.41462666455966, "x": 1, "y": 3}, {"dataset": "relatorio_licenciatura_pdf", "config": "high_precision", "config_display": "High Precision", "value": 100.44871250283904, "x": 2, "y": 3}, {"dataset": "relatorio_licenciatura_pdf", "config": "high_recall", "config_display": "High Recall", "value": 99.75971249878057, "x": 3, "y": 3}, {"dataset": "relatorio_licenciatura_pdf", "config": "standard", "config_display": "Standard", "value": 89.18764999543782, "x": 4, "y": 3}, {"dataset": "tech_english_large", "config": "comprehensive", "config_display": "Comprehensive", "value": 29.075600003125146, "x": 0, "y": 4}, {"dataset": "tech_english_large", "config": "fast_extraction", "config_display": "Fast Extraction", "value": 19.54887333170821, "x": 1, "y": 4}, {"dataset": "tech_english_large", "config": "high_precision", "config_display": "High Precision", "value": 21.31682499384624, "x": 2, "y": 4}, {"dataset": "tech_english_large", "config": "high_recall", "config_display": "High Recall", "value": 26.68543750405661, "x": 3, "y": 4}, {"dataset": "tech_english_large", "config": "standard", "config_display": "Standard", "value": 24.264270006096922, "x": 4, "y": 4}, {"dataset": "tecnologia_curta", "config": "comprehensive", "config_display": "Comprehensive", "value": 3.180999995674938, "x": 0, "y": 5}, {"dataset": "tecnologia_curta", "config": "fast_extraction", "config_display": "Fast Extraction", "value": 2.3499733360949904, "x": 1, "y": 5}, {"dataset": "tecnologia_curta", "config": "high_precision", "config_display": "High Precision", "value": 2.971712499856949, "x": 2, "y": 5}, {"dataset": "tecnologia_curta", "config": "high_recall", "config_display": "High Recall", "value": 3.9516500000900123, "x": 3, "y": 5}, {"dataset": "tecnologia_curta", "config": "standard", "config_display": "Standard", "value": 2.7979400008916855, "x": 4, "y": 5}], "datasets": ["ciencia_dados_medio", "economia_sustentavel", "medicina_especializada", "relatorio_licenciatura_pdf", "tech_english_large", "tecnologia_curta"], "configs": ["Comprehensive", "Fast Extraction", "High Precision", "High Recall", "Standard"], "min_value": 2.3499733360949904, "max_value": 116.4404200098943};
        const throughputDataOptimized = [{"x": 31, "y": 11079.57997316615, "config": "standard", "config_display": "Standard", "dataset": "tecnologia_curta", "time_ms": 2.7979400008916855}, {"x": 107, "y": 14394.354188260308, "config": "standard", "config_display": "Standard", "dataset": "ciencia_dados_medio", "time_ms": 7.433469998068176}, {"x": 320, "y": 13188.115691079644, "config": "standard", "config_display": "Standard", "dataset": "tech_english_large", "time_ms": 24.264270006096922}, {"x": 125, "y": 12584.897717426698, "config": "standard", "config_display": "Standard", "dataset": "medicina_especializada", "time_ms": 9.932540002046153}, {"x": 114, "y": 11729.420784766096, "config": "standard", "config_display": "Standard", "dataset": "economia_sustentavel", "time_ms": 9.71914999827277}, {"x": 1549, "y": 17367.875485891098, "config": "standard", "config_display": "Standard", "dataset": "relatorio_licenciatura_pdf", "time_ms": 89.18764999543782}, {"x": 31, "y": 10431.69552959523, "config": "high_precision", "config_display": "High Precision", "dataset": "tecnologia_curta", "time_ms": 2.971712499856949}, {"x": 107, "y": 12875.704323782502, "config": "high_precision", "config_display": "High Precision", "dataset": "ciencia_dados_medio", "time_ms": 8.310225002787774}, {"x": 320, "y": 15011.616415314096, "config": "high_precision", "config_display": "High Precision", "dataset": "tech_english_large", "time_ms": 21.31682499384624}, {"x": 125, "y": 10787.416692672958, "config": "high_precision", "config_display": "High Precision", "dataset": "medicina_especializada", "time_ms": 11.587575001613004}, {"x": 114, "y": 12187.576427654745, "config": "high_precision", "config_display": "High Precision", "dataset": "economia_sustentavel", "time_ms": 9.35378749636584}, {"x": 1549, "y": 15420.804920284267, "config": "high_precision", "config_display": "High Precision", "dataset": "relatorio_licenciatura_pdf", "time_ms": 100.44871250283904}, {"x": 31, "y": 7844.824313715503, "config": "high_recall", "config_display": "High Recall", "dataset": "tecnologia_curta", "time_ms": 3.9516500000900123}, {"x": 107, "y": 10430.578168945627, "config": "high_recall", "config_display": "High Recall", "dataset": "ciencia_dados_medio", "time_ms": 10.258299997076392}, {"x": 320, "y": 11991.559064802852, "config": "high_recall", "config_display": "High Recall", "dataset": "tech_english_large", "time_ms": 26.68543750405661}, {"x": 125, "y": 8895.032392938705, "config": "high_recall", "config_display": "High Recall", "dataset": "medicina_especializada", "time_ms": 14.052787497348618}, {"x": 114, "y": 11953.507146822803, "config": "high_recall", "config_display": "High Recall", "dataset": "economia_sustentavel", "time_ms": 9.536950001347577}, {"x": 1549, "y": 15527.310185651691, "config": "high_recall", "config_display": "High Recall", "dataset": "relatorio_licenciatura_pdf", "time_ms": 99.75971249878057}, {"x": 31, "y": 13191.63903855755, "config": "fast_extraction", "config_display": "Fast Extraction", "dataset": "tecnologia_curta", "time_ms": 2.3499733360949904}, {"x": 107, "y": 15380.826392917017, "config": "fast_extraction", "config_display": "Fast Extraction", "dataset": "ciencia_dados_medio", "time_ms": 6.95671333038869}, {"x": 320, "y": 16369.229805226729, "config": "fast_extraction", "config_display": "Fast Extraction", "dataset": "tech_english_large", "time_ms": 19.54887333170821}, {"x": 125, "y": 14939.989050709975, "config": "fast_extraction", "config_display": "Fast Extraction", "dataset": "medicina_especializada", "time_ms": 8.36680666737569}, {"x": 114, "y": 14296.320069683816, "config": "fast_extraction", "config_display": "Fast Extraction", "dataset": "economia_sustentavel", "time_ms": 7.9740800041084485}, {"x": 1549, "y": 17323.787592505385, "config": "fast_extraction", "config_display": "Fast Extraction", "dataset": "relatorio_licenciatura_pdf", "time_ms": 89.41462666455966}, {"x": 31, "y": 9745.363106617197, "config": "comprehensive", "config_display": "Comprehensive", "dataset": "tecnologia_curta", "time_ms": 3.180999995674938}, {"x": 107, "y": 8323.648343207193, "config": "comprehensive", "config_display": "Comprehensive", "dataset": "ciencia_dados_medio", "time_ms": 12.854939996032044}, {"x": 320, "y": 11005.791796750722, "config": "comprehensive", "config_display": "Comprehensive", "dataset": "tech_english_large", "time_ms": 29.075600003125146}, {"x": 125, "y": 10352.618461904192, "config": "comprehensive", "config_display": "Comprehensive", "dataset": "medicina_especializada", "time_ms": 12.074240006040782}, {"x": 114, "y": 9929.102725139981, "config": "comprehensive", "config_display": "Comprehensive", "dataset": "economia_sustentavel", "time_ms": 11.481399997137487}, {"x": 1549, "y": 13302.940678746923, "config": "comprehensive", "config_display": "Comprehensive", "dataset": "relatorio_licenciatura_pdf", "time_ms": 116.4404200098943}];
        
        // Dados globais - Vers√£o Original
        const heatmapDataOriginal = {"data": [{"dataset": "ciencia_dados_medio", "config": "comprehensive", "config_display": "Comprehensive", "value": 319.2326400021557, "x": 0, "y": 0}, {"dataset": "ciencia_dados_medio", "config": "fast_extraction", "config_display": "Fast Extraction", "value": 12.733633331178376, "x": 1, "y": 0}, {"dataset": "ciencia_dados_medio", "config": "high_precision", "config_display": "High Precision", "value": 39.67001249839086, "x": 2, "y": 0}, {"dataset": "ciencia_dados_medio", "config": "high_recall", "config_display": "High Recall", "value": 185.98679999922751, "x": 3, "y": 0}, {"dataset": "ciencia_dados_medio", "config": "standard", "config_display": "Standard", "value": 71.40552000200842, "x": 4, "y": 0}, {"dataset": "economia_sustentavel", "config": "comprehensive", "config_display": "Comprehensive", "value": 394.6896199893672, "x": 0, "y": 1}, {"dataset": "economia_sustentavel", "config": "fast_extraction", "config_display": "Fast Extraction", "value": 15.234906662954018, "x": 1, "y": 1}, {"dataset": "economia_sustentavel", "config": "high_precision", "config_display": "High Precision", "value": 41.62000000360422, "x": 2, "y": 1}, {"dataset": "economia_sustentavel", "config": "high_recall", "config_display": "High Recall", "value": 170.3299000073457, "x": 3, "y": 1}, {"dataset": "economia_sustentavel", "config": "standard", "config_display": "Standard", "value": 74.99608999933116, "x": 4, "y": 1}, {"dataset": "medicina_especializada", "config": "comprehensive", "config_display": "Comprehensive", "value": 472.3173000093084, "x": 0, "y": 2}, {"dataset": "medicina_especializada", "config": "fast_extraction", "config_display": "Fast Extraction", "value": 15.952506667235866, "x": 1, "y": 2}, {"dataset": "medicina_especializada", "config": "high_precision", "config_display": "High Precision", "value": 41.35806249541929, "x": 2, "y": 2}, {"dataset": "medicina_especializada", "config": "high_recall", "config_display": "High Recall", "value": 240.20301250493503, "x": 3, "y": 2}, {"dataset": "medicina_especializada", "config": "standard", "config_display": "Standard", "value": 63.899719997425564, "x": 4, "y": 2}, {"dataset": "relatorio_licenciatura_pdf", "config": "comprehensive", "config_display": "Comprehensive", "value": 291.08569999807514, "x": 0, "y": 3}, {"dataset": "relatorio_licenciatura_pdf", "config": "fast_extraction", "config_display": "Fast Extraction", "value": 85.63815333376017, "x": 1, "y": 3}, {"dataset": "relatorio_licenciatura_pdf", "config": "high_precision", "config_display": "High Precision", "value": 110.14483750477666, "x": 2, "y": 3}, {"dataset": "relatorio_licenciatura_pdf", "config": "high_recall", "config_display": "High Recall", "value": 163.65973750362173, "x": 3, "y": 3}, {"dataset": "relatorio_licenciatura_pdf", "config": "standard", "config_display": "Standard", "value": 115.06259000161663, "x": 4, "y": 3}, {"dataset": "tech_english_large", "config": "comprehensive", "config_display": "Comprehensive", "value": 375.3902400028892, "x": 0, "y": 4}, {"dataset": "tech_english_large", "config": "fast_extraction", "config_display": "Fast Extraction", "value": 26.076706661842763, "x": 1, "y": 4}, {"dataset": "tech_english_large", "config": "high_precision", "config_display": "High Precision", "value": 59.15338750128285, "x": 2, "y": 4}, {"dataset": "tech_english_large", "config": "high_recall", "config_display": "High Recall", "value": 154.69656250570551, "x": 3, "y": 4}, {"dataset": "tech_english_large", "config": "standard", "config_display": "Standard", "value": 80.19617000245489, "x": 4, "y": 4}, {"dataset": "tecnologia_curta", "config": "comprehensive", "config_display": "Comprehensive", "value": 473.16731999162585, "x": 0, "y": 5}, {"dataset": "tecnologia_curta", "config": "fast_extraction", "config_display": "Fast Extraction", "value": 11.542366668193912, "x": 1, "y": 5}, {"dataset": "tecnologia_curta", "config": "high_precision", "config_display": "High Precision", "value": 44.33426249670447, "x": 2, "y": 5}, {"dataset": "tecnologia_curta", "config": "high_recall", "config_display": "High Recall", "value": 150.7490375006455, "x": 3, "y": 5}, {"dataset": "tecnologia_curta", "config": "standard", "config_display": "Standard", "value": 59.73950999323279, "x": 4, "y": 5}], "datasets": ["ciencia_dados_medio", "economia_sustentavel", "medicina_especializada", "relatorio_licenciatura_pdf", "tech_english_large", "tecnologia_curta"], "configs": ["Comprehensive", "Fast Extraction", "High Precision", "High Recall", "Standard"], "min_value": 11.542366668193912, "max_value": 473.16731999162585};
        const throughputDataOriginal = [{"x": 31, "y": 518.9195559774702, "config": "standard", "config_display": "Standard", "dataset": "tecnologia_curta", "time_ms": 59.73950999323279}, {"x": 107, "y": 1498.4835905822185, "config": "standard", "config_display": "Standard", "dataset": "ciencia_dados_medio", "time_ms": 71.40552000200842}, {"x": 320, "y": 3990.215492712488, "config": "standard", "config_display": "Standard", "dataset": "tech_english_large", "time_ms": 80.19617000245489}, {"x": 125, "y": 1956.190105450166, "config": "standard", "config_display": "Standard", "dataset": "medicina_especializada", "time_ms": 63.899719997425564}, {"x": 114, "y": 1520.0792468116229, "config": "standard", "config_display": "Standard", "dataset": "economia_sustentavel", "time_ms": 74.99608999933116}, {"x": 1549, "y": 13462.238247707066, "config": "standard", "config_display": "Standard", "dataset": "relatorio_licenciatura_pdf", "time_ms": 115.06259000161663}, {"x": 31, "y": 699.2334653656266, "config": "high_precision", "config_display": "High Precision", "dataset": "tecnologia_curta", "time_ms": 44.33426249670447}, {"x": 107, "y": 2697.251481943452, "config": "high_precision", "config_display": "High Precision", "dataset": "ciencia_dados_medio", "time_ms": 39.67001249839086}, {"x": 320, "y": 5409.664830996538, "config": "high_precision", "config_display": "High Precision", "dataset": "tech_english_large", "time_ms": 59.15338750128285}, {"x": 125, "y": 3022.3852970347602, "config": "high_precision", "config_display": "High Precision", "dataset": "medicina_especializada", "time_ms": 41.35806249541929}, {"x": 114, "y": 2739.0677556493947, "config": "high_precision", "config_display": "High Precision", "dataset": "economia_sustentavel", "time_ms": 41.62000000360422}, {"x": 1549, "y": 14063.30096889765, "config": "high_precision", "config_display": "High Precision", "dataset": "relatorio_licenciatura_pdf", "time_ms": 110.14483750477666}, {"x": 31, "y": 205.63978725149246, "config": "high_recall", "config_display": "High Recall", "dataset": "tecnologia_curta", "time_ms": 150.7490375006455}, {"x": 107, "y": 575.3096456331547, "config": "high_recall", "config_display": "High Recall", "dataset": "ciencia_dados_medio", "time_ms": 185.98679999922751}, {"x": 320, "y": 2068.5656799141725, "config": "high_recall", "config_display": "High Recall", "dataset": "tech_english_large", "time_ms": 154.69656250570551}, {"x": 125, "y": 520.3931403542737, "config": "high_recall", "config_display": "High Recall", "dataset": "medicina_especializada", "time_ms": 240.20301250493503}, {"x": 114, "y": 669.289420090563, "config": "high_recall", "config_display": "High Recall", "dataset": "economia_sustentavel", "time_ms": 170.3299000073457}, {"x": 1549, "y": 9464.759162073819, "config": "high_recall", "config_display": "High Recall", "dataset": "relatorio_licenciatura_pdf", "time_ms": 163.65973750362173}, {"x": 31, "y": 2685.757686543042, "config": "fast_extraction", "config_display": "Fast Extraction", "dataset": "tecnologia_curta", "time_ms": 11.542366668193912}, {"x": 107, "y": 8402.943387572648, "config": "fast_extraction", "config_display": "Fast Extraction", "dataset": "ciencia_dados_medio", "time_ms": 12.733633331178376}, {"x": 320, "y": 12271.488273028208, "config": "fast_extraction", "config_display": "Fast Extraction", "dataset": "tech_english_large", "time_ms": 26.076706661842763}, {"x": 125, "y": 7835.7591447826735, "config": "fast_extraction", "config_display": "Fast Extraction", "dataset": "medicina_especializada", "time_ms": 15.952506667235866}, {"x": 114, "y": 7482.815781025312, "config": "fast_extraction", "config_display": "Fast Extraction", "dataset": "economia_sustentavel", "time_ms": 15.234906662954018}, {"x": 1549, "y": 18087.732391461494, "config": "fast_extraction", "config_display": "Fast Extraction", "dataset": "relatorio_licenciatura_pdf", "time_ms": 85.63815333376017}, {"x": 31, "y": 65.51593630884872, "config": "comprehensive", "config_display": "Comprehensive", "dataset": "tecnologia_curta", "time_ms": 473.16731999162585}, {"x": 107, "y": 335.17875866101116, "config": "comprehensive", "config_display": "Comprehensive", "dataset": "ciencia_dados_medio", "time_ms": 319.2326400021557}, {"x": 320, "y": 852.4462436677553, "config": "comprehensive", "config_display": "Comprehensive", "dataset": "tech_english_large", "time_ms": 375.3902400028892}, {"x": 125, "y": 264.65259688251206, "config": "comprehensive", "config_display": "Comprehensive", "dataset": "medicina_especializada", "time_ms": 472.3173000093084}, {"x": 114, "y": 288.8345530928103, "config": "comprehensive", "config_display": "Comprehensive", "dataset": "economia_sustentavel", "time_ms": 394.6896199893672}, {"x": 1549, "y": 5321.456876824395, "config": "comprehensive", "config_display": "Comprehensive", "dataset": "relatorio_licenciatura_pdf", "time_ms": 291.08569999807514}];
        
        // Dados de compara√ß√£o e configura√ß√£o
        const comparisonData = {"comparison": [{"config": "Standard", "config_key": "standard", "old_time": 77.54993333267824, "new_time": 23.88917000013559, "improvement": 3.2462380791060585}, {"config": "High Precision", "config_key": "high_precision", "old_time": 56.046760416696394, "new_time": 25.664806249551475, "improvement": 2.1837983061990145}, {"config": "High Recall", "config_key": "high_recall", "old_time": 177.60417500358017, "new_time": 27.37413958311663, "improvement": 6.488027668022849}, {"config": "Fast Extraction", "config_key": "fast_extraction", "old_time": 27.863045554194183, "new_time": 22.435178889039282, "improvement": 1.241935519747814}, {"config": "Comprehensive", "config_key": "comprehensive", "old_time": 387.64713666557026, "new_time": 30.851266667984117, "improvement": 12.565031473014066}], "improvements": [{"config": "Standard", "improvement_percent": 224.62380791060585, "color": "#3498db"}, {"config": "High Precision", "improvement_percent": 118.37983061990145, "color": "#e74c3c"}, {"config": "High Recall", "improvement_percent": 548.802766802285, "color": "#f39c12"}, {"config": "Fast Extraction", "improvement_percent": 24.193551974781393, "color": "#27ae60"}, {"config": "Comprehensive", "improvement_percent": 1156.5031473014067, "color": "#9b59b6"}]};
        const configColors = {"standard": "#3498db", "high_precision": "#e74c3c", "high_recall": "#f39c12", "fast_extraction": "#27ae60", "comprehensive": "#9b59b6"};
        
        // Vari√°veis globais para charts
        let comparisonChart, throughputChart;
        let currentFilter = 'all';
        let currentVersion = 'optimized';
        
        // Fun√ß√£o para obter dados atuais baseado na vers√£o selecionada
        function getCurrentHeatmapData() {
            return currentVersion === 'optimized' ? heatmapDataOptimized : heatmapDataOriginal;
        }
        
        function getCurrentThroughputData() {
            return currentVersion === 'optimized' ? throughputDataOptimized : throughputDataOriginal;
        }
        
        // Inicializa√ß√£o
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOM loaded');
            console.log('Version switch element:', document.getElementById('versionSwitch'));
            initializeCharts();
            createHeatmap();
        });
        
        function initializeCharts() {
            createComparisonChart();
            createThroughputChart();
        }
        
        function createComparisonChart() {
            const ctx = document.getElementById('comparisonChart').getContext('2d');
            
            let dataToShow = comparisonData.comparison;
            if (currentFilter !== 'all') {
                dataToShow = comparisonData.comparison.filter(d => d.config_key === currentFilter);
            }
            
            const configs = dataToShow.map(d => d.config);
            const oldTimes = dataToShow.map(d => d.old_time);
            const newTimes = dataToShow.map(d => d.new_time);
            
            if (comparisonChart) {
                comparisonChart.destroy();
            }
            
            comparisonChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: configs,
                    datasets: [{
                        label: 'Vers√£o Anterior',
                        data: oldTimes,
                        backgroundColor: 'rgba(231, 76, 60, 0.7)',
                        borderColor: 'rgba(231, 76, 60, 1)',
                        borderWidth: 2
                    }, {
                        label: 'Vers√£o Otimizada',
                        data: newTimes,
                        backgroundColor: 'rgba(39, 174, 96, 0.7)',
                        borderColor: 'rgba(39, 174, 96, 1)',
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'top'
                        },
                        tooltip: {
                            callbacks: {
                                afterBody: function(context) {
                                    const index = context[0].dataIndex;
                                    const improvement = dataToShow[index].improvement;
                                    return `Melhoria: ${improvement.toFixed(1)}x mais r√°pido`;
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Tempo (ms)'
                            }
                        },
                        x: {
                            title: {
                                display: true,
                                text: 'Configura√ß√£o'
                            }
                        }
                    }
                }
            });
        }
        
        function createThroughputChart() {
            const ctx = document.getElementById('throughputChart').getContext('2d');
            
            let dataToShow = getCurrentThroughputData();
            if (currentFilter !== 'all') {
                dataToShow = dataToShow.filter(d => d.config === currentFilter);
            }
            
            // Agrupa por configura√ß√£o
            const configGroups = {};
            dataToShow.forEach(d => {
                if (!configGroups[d.config_display]) {
                    configGroups[d.config_display] = [];
                }
                configGroups[d.config_display].push(d.y);
            });
            
            const labels = Object.keys(configGroups);
            const avgThroughput = labels.map(label => {
                const values = configGroups[label];
                return values.reduce((a, b) => a + b, 0) / values.length;
            });
            
            if (throughputChart) {
                throughputChart.destroy();
            }
            
            const versionLabel = currentVersion === 'optimized' ? 'Vers√£o Otimizada' : 'Vers√£o Original';
            
            throughputChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: [{
                        label: `Throughput M√©dio (palavras/seg) - ${versionLabel}`,
                        data: avgThroughput,
                        backgroundColor: labels.map((_, i) => Object.values(configColors)[i] + '80'),
                        borderColor: labels.map((_, i) => Object.values(configColors)[i]),
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: true,
                            position: 'top'
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return `Throughput: ${Math.round(context.parsed.y)} palavras/seg`;
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Palavras por Segundo'
                            }
                        },
                        x: {
                            title: {
                                display: true,
                                text: 'Configura√ß√£o'
                            }
                        }
                    }
                }
            });
        }
        
        function createHeatmap() {
            const container = document.getElementById('heatmapContainer');
            container.innerHTML = '';
            
            // Obt√©m dados da vers√£o atual
            const currentHeatmapData = getCurrentHeatmapData();
            
            // Cria estrutura do heatmap
            const datasets = currentHeatmapData.datasets;
            const configs = currentHeatmapData.configs;
            
            // USA SEMPRE a escala da vers√£o original para consist√™ncia
            const minValue = heatmapDataOriginal.min_value;
            const maxValue = heatmapDataOriginal.max_value;
            
            // Atualiza t√≠tulo
            const versionLabel = currentVersion === 'optimized' ? 'Vers√£o Otimizada' : 'Vers√£o Original';
            const titleElement = container.parentElement.querySelector('.chart-title');
            titleElement.textContent = `üî• Mapa de Calor - Performance por Dataset (${versionLabel})`;
            
            // Atualiza legenda com escala consistente (sempre baseada na vers√£o original)
            document.getElementById('legendMin').textContent = `${minValue.toFixed(1)}ms`;
            document.getElementById('legendMax').textContent = `${maxValue.toFixed(1)}ms`;
            
            datasets.forEach(dataset => {
                const row = document.createElement('div');
                row.className = 'heatmap-labels';
                row.innerHTML = `<div class="dataset-label">${dataset}</div>`;
                
                configs.forEach(config => {
                    const dataPoint = currentHeatmapData.data.find(d => 
                        d.dataset === dataset && d.config_display === config
                    );
                    
                    if (dataPoint) {
                        const cell = document.createElement('div');
                        cell.className = 'heatmap-cell';
                        
                        // Normaliza o valor para cor
                        const normalized = (dataPoint.value - minValue) / (maxValue - minValue);
                        const red = Math.round(255 * normalized);
                        const green = Math.round(255 * (1 - normalized));
                        
                        cell.style.backgroundColor = `rgb(${red}, ${green}, 0)`;
                        cell.textContent = `${dataPoint.value.toFixed(1)}ms`;
                        cell.title = `${dataset} - ${config}: ${dataPoint.value.toFixed(1)}ms (${versionLabel})`;
                        
                        row.appendChild(cell);
                    } else {
                        const emptyCell = document.createElement('div');
                        emptyCell.className = 'heatmap-cell';
                        emptyCell.style.backgroundColor = '#f0f0f0';
                        emptyCell.textContent = 'N/A';
                        row.appendChild(emptyCell);
                    }
                });
                
                container.appendChild(row);
            });
        }
        
        // Fun√ß√µes de controle
        function filterByConfig() {
            currentFilter = document.getElementById('configFilter').value;
            createComparisonChart();
            createThroughputChart();
        }
        
        function switchVersion() {
            currentVersion = document.getElementById('versionSwitch').value;
            
            // Atualiza heatmap e throughput
            createHeatmap();
            createThroughputChart();
            
            // Atualiza banner com informa√ß√£o da vers√£o
            const banner = document.querySelector('.improvement-banner');
            if (currentVersion === 'optimized') {
                banner.innerHTML = 'üéØ VISUALIZANDO: VERS√ÉO OTIMIZADA (26ms m√©dio)';
                banner.style.background = 'linear-gradient(135deg, #27ae60 0%, #2ecc71 100%)';
            } else {
                banner.innerHTML = '‚è≥ VISUALIZANDO: VERS√ÉO ORIGINAL (145ms m√©dio)';
                banner.style.background = 'linear-gradient(135deg, #e74c3c 0%, #c0392b 100%)';
            }
        }
        
        function resetCharts() {
            currentFilter = 'all';
            currentVersion = 'optimized';
            document.getElementById('configFilter').value = 'all';
            document.getElementById('versionSwitch').value = 'optimized';
            
            createComparisonChart();
            createThroughputChart();
            createHeatmap();
            
            // Reset do banner
            const banner = document.querySelector('.improvement-banner');
            banner.innerHTML = 'üéØ MELHORIA GERAL: 5.6x MAIS R√ÅPIDO';
            banner.style.background = 'linear-gradient(135deg, #27ae60 0%, #2ecc71 100%)';
        }
        
        function exportData() {
            const exportData = {
                comparison: comparisonData,
                heatmap: heatmapData,
                throughput: throughputData,
                timestamp: new Date().toISOString()
            };
            
            const blob = new Blob([JSON.stringify(exportData, null, 2)], {type: 'application/json'});
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'yake_performance_data_corrected.json';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }
    </script>
</body>
</html>
        